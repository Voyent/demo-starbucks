<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../styles/shared-styles.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">

<dom-module id="login-view">
  <template>
    <span class="hidden">login-view visible=<span>{{visible}}</span></span>
    <template is="dom-if" if="{{visible}}">
      <style include="shared-styles">
        :host {
          display: block;
        }
        .login-view-container{
          max-width: 600px;
          margin-left: auto;
          margin-right: auto;
          padding-top: 40px;
        }
        paper-card{
          width: 100%;
        }
        paper-card::shadow .header.paper-card{
          background-color: #2002DD;
        }
        paper-card::shadow .header.paper-card .title-text.paper-card{
          color: #FFF;
        }
        paper-button {
          padding:0;
          background-color: #1C8119;
        }
        paper-button::shadow .button-content {
          padding:0;
        }
        paper-button button {
          padding: 0.7em 0.8em;
          font: inherit;
          background-color: transparent;
          border-color: transparent;
          color: #FFF;
          outline: none;
        }
        paper-button button::-moz-focus-inner {
          border: 0;
        }
        paper-icon-button{
          height: 35px;
          width: 35px;
        }
        paper-input{
          --paper-input-container-focus-color: #000067;
        }
       
      </style>
      <div class="login-view-container">
        <form is="iron-form" id="loginForm" on-submit="handleLogin">
          <paper-card heading="Starbucks Demo Sign In">
            <div class="card-content">
              <paper-input label="Username" required placeholder="Enter your username" value="{{username}}">
                 <paper-icon-button suffix icon="clear" on-click="_clearUsername" tabindex="-1"></paper-icon-button>
              </paper-input>
              <paper-input type="password" required label="Password" placeholder="Enter your password" value="{{password}}">
                <paper-icon-button suffix icon="clear" on-click="_clearPassword" tabindex="-1"></paper-icon-button>
              </paper-input>
            </div>
            <div class="card-actions" style="text-align: right">
              <div style="float:left; color: red"><span>{{error}}</span></div>
              <paper-button type="submit" raised colored on-click="handleLogin"><button>Go!</button></paper-button>
            </div>
          </paper-card>
        </form>
      </div>
    </template>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'login-view',

      behaviors: [
        Polymer.IronFormElementBehavior,
        Polymer.IronValidatableBehavior
      ],

      properties: {
         username: {
          notify: true,
          type: String
        },
        password: {
          notify: true,
          type: String
        },
        visible: {
          notify: true,
          type: Boolean
        },
        error: {
          notify: true,
          type: String
        }
      },

      handleLogin: function(e){
        console.log('login-view.handleLogin() ' + this.username + ', ' + this.password);
        this.fire('doLogin', {username: this.username, password: this.password});
        e.preventDefault();
      },

      _clearPassword: function(){
        this.password = '';
      },

      _clearUsername: function(){
        this.username = '';
      },

      // Overidden from Polymer.IronValidatableBehavior. Will set the `invalid`
      // attribute automatically, which should be used for styling.
      _getValidity: function() {
        return !!this.password && !!this.username;
      }


    });
  })();
  </script>
</dom-module>
